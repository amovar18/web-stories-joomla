!function(e){var t={};function __webpack_require__(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,__webpack_require__),a.l=!0,a.exports}__webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.d=function(e,t,r){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.t=function(e,t){if(1&t&&(e=__webpack_require__(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(__webpack_require__.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)__webpack_require__.d(r,a,function(t){return e[t]}.bind(null,a));return r},__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="../media/com_webstories/js/",__webpack_require__(__webpack_require__.s=0)}([function(e,t,r){"use strict";r.r(t);const a=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","#","$","%","*","+",",","-",".",":",";","=","?","@","[","]","^","_","{","|","}","~"],o=(e,t)=>{var r="";for(let o=1;o<=t;o++){let n=Math.floor(e)/Math.pow(83,t-o)%83;r+=a[Math.floor(n)]}return r},n=e=>{let t=e/255;return t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)},_=e=>{let t=Math.max(0,Math.min(1,e));return t<=.0031308?Math.round(12.92*t*255+.5):Math.round(255*(1.055*Math.pow(t,1/2.4)-.055)+.5)},i=(e,t)=>(e<0?-1:1)*Math.pow(Math.abs(e),t);class ValidationError extends Error{constructor(e){super(e),this.name="ValidationError",this.message=e}}const u=(e,t,r,a)=>{let o=0,_=0,i=0;const u=4*t;for(let c=0;c<t;c++)for(let t=0;t<r;t++){const r=a(c,t);o+=r*n(e[4*c+0+t*u]),_+=r*n(e[4*c+1+t*u]),i+=r*n(e[4*c+2+t*u])}let c=1/(t*r);return[o*c,_*c,i*c]};var c=(e,t,r,a,n)=>{if(a<1||a>9||n<1||n>9)throw new ValidationError("BlurHash must have between 1 and 9 components");if(t*r*4!==e.length)throw new ValidationError("Width and height must match the pixels array");let c=[];for(let o=0;o<n;o++)for(let n=0;n<a;n++){const a=0==n&&0==o?1:2,_=u(e,t,r,((e,_)=>a*Math.cos(Math.PI*n*e/t)*Math.cos(Math.PI*o*_/r)));c.push(_)}const l=c[0],s=c.slice(1);let h,p="";if(p+=o(a-1+9*(n-1),1),s.length>0){let e=Math.max(...s.map((e=>Math.max(...e)))),t=Math.floor(Math.max(0,Math.min(82,Math.floor(166*e-.5))));h=(t+1)/166,p+=o(t,1)}else h=1,p+=o(0,1);var f;return p+=o((_((f=l)[0])<<16)+(_(f[1])<<8)+_(f[2]),4),s.forEach((e=>{p+=o(((e,t)=>19*Math.floor(Math.max(0,Math.min(18,Math.floor(9*i(e[0]/t,.5)+9.5))))*19+19*Math.floor(Math.max(0,Math.min(18,Math.floor(9*i(e[1]/t,.5)+9.5))))+Math.floor(Math.max(0,Math.min(18,Math.floor(9*i(e[2]/t,.5)+9.5)))))(e,h),2)})),p};self.onmessage=function(e){const{image:t,width:r,height:a,compontentX:o,compontentY:n}=e.data;try{const e=c(t,r,a,o,n);postMessage({type:"success",blurHash:e})}catch(e){postMessage({type:"error",error:e})}}}]);